<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
    <form id="valiatingForm">
        <label for="fName">First Name:</label><br>
        <input type="text" id="fName" name="fname"><br>
        <label for="lName">Last Name:</label><br>
        <input type="text" id="lName" name="lname"><br>
        <input type="radio" id="gender" name="gender" value="male">Male
        <input type="radio" id="gender" name="gender2" value="female">Female
        <input type="radio" id="gender" name="gender3" value="other">Other
        <br>
        <label for="email">Email:</label><br>
        <input type="text" id="email" name="email"><br>
        <label for="zipCode">Zip Code:</label><br>
        <input type="text" id="zipCode" name="zipCode"><br><br>
        <input type="submit" value="Submit Form">
    </form>
    <script>
        let form = document.forms[0];
        form.addEventListener("submit", (event) =>
        {
            event.preventDefault();
            let err=validator(form);
            if (err===0) {form.submit();}
        });

        function validator(form)
        {
            // check for blank fields
            let errType1 = validateFields(form);
            // validate zip code
            let errType2 = validateZip(form);
            // validate email
            let errType3 = validateEmail(form);

            if (errType1===0 && errType2===0 && errType3===0)
            {
                return 0;
            }
            return -1;
        }

        function validateFields(form)
        {
            if (form["fName"].value==="") 
            {
                alert("Enter the first name");
                return -1;
            }
            if (form["lName"].value==="") 
            {
                alert("Enter the last name");
                return -1;
            }
            if 
            (!form["gender"][0].checked && 
            !form["gender"][1].checked &&
            !form["gender"][2].checked) 
            {
                alert("Select the gender");
                return -1;
            }
            if (form["email"].value==="") 
            {
                alert("Enter the email");
                return -1;
            }
            if (form["zipCode"].value==="") 
            {
                alert("Enter the zip code");
                return -1;
            }
            return 0;
        }

        // valid zip is the form xxxxx or xxxxx-xxxx
        function validateZip(form)
        {
            let zips=form["zipCode"].value;
            // length cannot be more than 10
            if (zips.length > 10 )
            {
                alert("zip code is too long");
                return -2;
            }
            // catch length not correct length
            if (zips.length != 5 && zips.length != 10)
            {
                alert("zip code is not the correct length")
                return -5
            }
            // check first half
            for (let i=0;i<5;++i)
            {
                if (isNaN(zips[i]))
                {
                    alert("zip code not in numerical form");
                    return -1;
                }
            }
            // check second half 
            if (zips.length == 10)
            {
                if (zips[5]!='-')
                {
                    alert("unknown character in the zip code field");
                    return -3;
                }
                else 
                {
                    // zip code passed the character dash check
                    for (let i=6;i<10;++i)
                    {
                        if (isNaN(zips[i]))
                        {
                            alert("zip code is not the correct format");
                            return -4;
                        }
                    }
                }
            }
            return 0;
        }

        // validate one @ not at beginning and end
        // validate at least one . not at beginning and end
        function validateEmail(form)
        {
            let atSymbol=0;
            let dotSymbol=0;
            let email=form["email"].value;
            if (email[0]=='@' || email[email.length-1]=='@')
            {
                alert("@ at beginning or end error");
                return -1;
            }
            if (email[0]=='.' || email[email.length-1]=='.')
            {
                alert(". at beginning or end error");
                return -2;
            }
            for (let i=0;i<email.length;++i)
            {
                if (email[i]==='@')
                {
                    if (atSymbol!=0 && email[i]==='@')
                    {
                        alert("multiple @ symbols in email");
                        return -3;
                    }
                    ++atSymbol;
                }
                if (email[i]==='.')
                {
                    ++dotSymbol;
                }
            }
            if (atSymbol===1 && dotSymbol>0)
            {
                return 0;
            }
            else
            {
                alert("No valid symbols in email");
                return -4;
            }
        }
    </script>
</body>
</html>